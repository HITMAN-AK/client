{"ast":null,"code":"var Utils = require(\"../utils\");\nvar PayoutConstants = require(\"./constants\");\nlet SelfWithdrawal = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"withdrawalId\", \"amount\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/selfWithdrawal\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doPost(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = await Utils.doPost(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet GetBalance = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var path = \"/payout/v1/getBalance\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doGet(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = await Utils.doGet(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nmodule.exports = {\n  SelfWithdrawal,\n  GetBalance\n};","map":{"version":3,"names":["Utils","require","PayoutConstants","SelfWithdrawal","req","Promise","resolve","reject","checkToken","error","requiredParams","checkParams","checkKeysInObject","path","obj","headers","BearerToken","hostname","MPAEndpoint","data","response","doPost","status","subCode","authorize","Authorization","GetBalance","doGet","module","exports"],"sources":["C:/GitHub/gaminghub/node_modules/cashfree-sdk/Payouts/Common.js"],"sourcesContent":["var Utils = require(\"../utils\")\nvar PayoutConstants = require(\"./constants\")\n\n\nlet SelfWithdrawal = function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\tvar requiredParams = [\"withdrawalId\", \"amount\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar path = \"/payout/v1/selfWithdrawal\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doPost(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = await Utils.doPost(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nlet GetBalance = function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\tvar path = \"/payout/v1/getBalance\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doGet(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = await Utils.doGet(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nmodule.exports = {SelfWithdrawal, GetBalance};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}