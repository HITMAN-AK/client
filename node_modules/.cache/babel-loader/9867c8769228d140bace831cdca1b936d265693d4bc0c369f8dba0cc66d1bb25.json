{"ast":null,"code":"//Beneficiary main\nvar Utils = require(\"../../utils\");\nvar PayoutConstants = require(\"../constants.js\");\nlet Add = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"beneId\", \"name\", \"email\", \"phone\", \"address1\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams !== true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/addBeneficiary\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doPost(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doPost(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet GetDetails = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"beneId\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/getBeneficiary/\" + req.beneId;\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doGet(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doGet(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet GetBeneId = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"bankAccount\", \"ifsc\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var params = \"?\";\n    params += \"bankAccount=\" + req.bankAccount;\n    params += \"&ifsc=\" + req.ifsc;\n    var path = \"/payout/v1/getBeneId\" + params;\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doGet(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doGet(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet Remove = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"beneId\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/removeBeneficiary\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doPost(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doPost(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nmodule.exports = {\n  Add,\n  GetDetails,\n  GetBeneId,\n  Remove\n};","map":{"version":3,"names":["Utils","require","PayoutConstants","Add","req","Promise","resolve","reject","checkToken","error","requiredParams","checkParams","checkKeysInObject","path","obj","headers","BearerToken","hostname","MPAEndpoint","data","response","doPost","status","subCode","authorize","Authorization","GetDetails","beneId","doGet","GetBeneId","params","bankAccount","ifsc","Remove","module","exports"],"sources":["C:/GitHub/gaminghub/node_modules/cashfree-sdk/Payouts/Beneficiary/index.js"],"sourcesContent":["//Beneficiary main\nvar Utils = require(\"../../utils\")\nvar PayoutConstants = require(\"../constants.js\")\n\n\nlet Add =  function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\n\t    var requiredParams = [\"beneId\", \"name\", \"email\", \"phone\", \"address1\"];\n\t    var checkParams = Utils.checkKeysInObject(req, requiredParams)\n\t    if(checkParams !== true) {\n\t    \treturn resolve (checkParams);\n\t    }\n\n\t    var path = \"/payout/v1/addBeneficiary\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t        \"Content-Type\": \"application/json\",\n\t        \"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\t    \n\t    try {\n\t    \tresponse = await Utils.doPost(obj);\n\t    \tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t    \t\tawait PayoutConstants.authorize();\n\t    \t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doPost(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n    });\n}\n\nlet GetDetails = function(req){\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\t\n\t\tvar requiredParams = [\"beneId\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar path = \"/payout/v1/getBeneficiary/\"+req.beneId;\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doGet(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doGet(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nlet GetBeneId = function(req){\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\t\n\t\tvar requiredParams = [\"bankAccount\", \"ifsc\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar params = \"?\";\n\t\tparams += \"bankAccount=\"+req.bankAccount;\n\t\tparams += \"&ifsc=\"+req.ifsc;\n\n\t\tvar path = \"/payout/v1/getBeneId\"+params;\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doGet(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doGet(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nlet Remove = function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\t\n\t\tvar requiredParams = [\"beneId\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar path = \"/payout/v1/removeBeneficiary\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doPost(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doPost(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nmodule.exports = {Add, GetDetails, GetBeneId, Remove};\n"],"mappings":"AAAA;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,aAAa,CAAC;AAClC,IAAIC,eAAe,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAGhD,IAAIE,GAAG,GAAI,SAAAA,CAASC,GAAG,EAAE;EACxB,OAAO,IAAIC,OAAO,CAAC,OAAOC,OAAO,EAAEC,MAAM,KAAK;IAC7C,IAAI;MACH,MAAML,eAAe,CAACM,UAAU,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;IAEG,IAAIC,cAAc,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,CAAC;IACrE,IAAIC,WAAW,GAAGX,KAAK,CAACY,iBAAiB,CAACR,GAAG,EAAEM,cAAc,CAAC;IAC9D,IAAGC,WAAW,KAAK,IAAI,EAAE;MACxB,OAAOL,OAAO,CAAEK,WAAW,CAAC;IAC7B;IAEA,IAAIE,IAAI,GAAG,2BAA2B;IACzC,IAAIC,GAAG,GAAG,CAAC,CAAC;IACZA,GAAG,CAACC,OAAO,GAAG;MACP,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAACb,eAAe,CAACc;IAClD,CAAC;IACDF,GAAG,CAACD,IAAI,GAAGA,IAAI;IACfC,GAAG,CAACG,QAAQ,GAAGf,eAAe,CAACgB,WAAW;IAC1CJ,GAAG,CAACK,IAAI,GAAGf,GAAG;IAEX,IAAI;MACHgB,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,MAAM,CAACP,GAAG,CAAC;MAClC,IAAIM,QAAQ,CAACE,MAAM,IAAI,OAAO,IAAIF,QAAQ,CAACG,OAAO,IAAI,KAAK,EAAE;QAC5D,MAAMrB,eAAe,CAACsB,SAAS,CAAC,CAAC;QACjCV,GAAG,CAACC,OAAO,CAACU,aAAa,GAAG,SAAS,GAACvB,eAAe,CAACc,WAAW;QACjEI,QAAQ,GAAGpB,KAAK,CAACqB,MAAM,CAACP,GAAG,CAAC;MAC7B;MACH,OAAOR,OAAO,CAACc,QAAQ,CAAC;IACzB,CAAC,CAAC,OAAOX,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;EACE,CAAC,CAAC;AACN,CAAC;AAED,IAAIiB,UAAU,GAAG,SAAAA,CAAStB,GAAG,EAAC;EAC7B,OAAO,IAAIC,OAAO,CAAC,OAAOC,OAAO,EAAEC,MAAM,KAAK;IAC7C,IAAI;MACH,MAAML,eAAe,CAACM,UAAU,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;IAEA,IAAIC,cAAc,GAAG,CAAC,QAAQ,CAAC;IAC/B,IAAIC,WAAW,GAAGX,KAAK,CAACY,iBAAiB,CAACR,GAAG,EAAEM,cAAc,CAAC;IAC9D,IAAIC,WAAW,IAAI,IAAI,EAAE;MACxB,OAAOL,OAAO,CAAEK,WAAW,CAAC;IAC7B;IAEA,IAAIE,IAAI,GAAG,4BAA4B,GAACT,GAAG,CAACuB,MAAM;IAClD,IAAIb,GAAG,GAAG,CAAC,CAAC;IACZA,GAAG,CAACC,OAAO,GAAG;MACb,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAACb,eAAe,CAACc;IAC5C,CAAC;IACDF,GAAG,CAACD,IAAI,GAAGA,IAAI;IACfC,GAAG,CAACG,QAAQ,GAAGf,eAAe,CAACgB,WAAW;IAC1CJ,GAAG,CAACK,IAAI,GAAGf,GAAG;IAEd,IAAI;MACHgB,QAAQ,GAAG,MAAMpB,KAAK,CAAC4B,KAAK,CAACd,GAAG,CAAC;MACjC,IAAIM,QAAQ,CAACE,MAAM,IAAI,OAAO,IAAIF,QAAQ,CAACG,OAAO,IAAI,KAAK,EAAE;QAC5D,MAAMrB,eAAe,CAACsB,SAAS,CAAC,CAAC;QAEjCV,GAAG,CAACC,OAAO,CAACU,aAAa,GAAG,SAAS,GAACvB,eAAe,CAACc,WAAW;QAC9DI,QAAQ,GAAGpB,KAAK,CAAC4B,KAAK,CAACd,GAAG,CAAC;MAC5B;MACH,OAAOR,OAAO,CAACc,QAAQ,CAAC;IACzB,CAAC,CAAC,OAAOX,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;EACD,CAAC,CAAC;AACH,CAAC;AAED,IAAIoB,SAAS,GAAG,SAAAA,CAASzB,GAAG,EAAC;EAC5B,OAAO,IAAIC,OAAO,CAAC,OAAOC,OAAO,EAAEC,MAAM,KAAK;IAC7C,IAAI;MACH,MAAML,eAAe,CAACM,UAAU,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;IAEA,IAAIC,cAAc,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC;IAC5C,IAAIC,WAAW,GAAGX,KAAK,CAACY,iBAAiB,CAACR,GAAG,EAAEM,cAAc,CAAC;IAC9D,IAAIC,WAAW,IAAI,IAAI,EAAE;MACxB,OAAOL,OAAO,CAAEK,WAAW,CAAC;IAC7B;IAEA,IAAImB,MAAM,GAAG,GAAG;IAChBA,MAAM,IAAI,cAAc,GAAC1B,GAAG,CAAC2B,WAAW;IACxCD,MAAM,IAAI,QAAQ,GAAC1B,GAAG,CAAC4B,IAAI;IAE3B,IAAInB,IAAI,GAAG,sBAAsB,GAACiB,MAAM;IACxC,IAAIhB,GAAG,GAAG,CAAC,CAAC;IACZA,GAAG,CAACC,OAAO,GAAG;MACb,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAACb,eAAe,CAACc;IAC5C,CAAC;IACDF,GAAG,CAACD,IAAI,GAAGA,IAAI;IACfC,GAAG,CAACG,QAAQ,GAAGf,eAAe,CAACgB,WAAW;IAC1CJ,GAAG,CAACK,IAAI,GAAGf,GAAG;IAEd,IAAI;MACHgB,QAAQ,GAAG,MAAMpB,KAAK,CAAC4B,KAAK,CAACd,GAAG,CAAC;MACjC,IAAIM,QAAQ,CAACE,MAAM,IAAI,OAAO,IAAIF,QAAQ,CAACG,OAAO,IAAI,KAAK,EAAE;QAC5D,MAAMrB,eAAe,CAACsB,SAAS,CAAC,CAAC;QAEjCV,GAAG,CAACC,OAAO,CAACU,aAAa,GAAG,SAAS,GAACvB,eAAe,CAACc,WAAW;QAC9DI,QAAQ,GAAGpB,KAAK,CAAC4B,KAAK,CAACd,GAAG,CAAC;MAC5B;MACH,OAAOR,OAAO,CAACc,QAAQ,CAAC;IACzB,CAAC,CAAC,OAAOX,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;EACD,CAAC,CAAC;AACH,CAAC;AAED,IAAIwB,MAAM,GAAG,SAAAA,CAAS7B,GAAG,EAAE;EAC1B,OAAO,IAAIC,OAAO,CAAC,OAAOC,OAAO,EAAEC,MAAM,KAAK;IAC7C,IAAI;MACH,MAAML,eAAe,CAACM,UAAU,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;IAEA,IAAIC,cAAc,GAAG,CAAC,QAAQ,CAAC;IAC/B,IAAIC,WAAW,GAAGX,KAAK,CAACY,iBAAiB,CAACR,GAAG,EAAEM,cAAc,CAAC;IAC9D,IAAIC,WAAW,IAAI,IAAI,EAAE;MACxB,OAAOL,OAAO,CAAEK,WAAW,CAAC;IAC7B;IAEA,IAAIE,IAAI,GAAG,8BAA8B;IACzC,IAAIC,GAAG,GAAG,CAAC,CAAC;IACZA,GAAG,CAACC,OAAO,GAAG;MACb,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAACb,eAAe,CAACc;IAC5C,CAAC;IACDF,GAAG,CAACD,IAAI,GAAGA,IAAI;IACfC,GAAG,CAACG,QAAQ,GAAGf,eAAe,CAACgB,WAAW;IAC1CJ,GAAG,CAACK,IAAI,GAAGf,GAAG;IAEd,IAAI;MACHgB,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,MAAM,CAACP,GAAG,CAAC;MAClC,IAAIM,QAAQ,CAACE,MAAM,IAAI,OAAO,IAAIF,QAAQ,CAACG,OAAO,IAAI,KAAK,EAAE;QAC5D,MAAMrB,eAAe,CAACsB,SAAS,CAAC,CAAC;QACjCV,GAAG,CAACC,OAAO,CAACU,aAAa,GAAG,SAAS,GAACvB,eAAe,CAACc,WAAW;QAC9DI,QAAQ,GAAGpB,KAAK,CAACqB,MAAM,CAACP,GAAG,CAAC;MAC7B;MACH,OAAOR,OAAO,CAACc,QAAQ,CAAC;IACzB,CAAC,CAAC,OAAOX,KAAK,EAAE;MACf,OAAOH,OAAO,CAACG,KAAK,CAAC;IACtB;EACD,CAAC,CAAC;AACH,CAAC;AAEDyB,MAAM,CAACC,OAAO,GAAG;EAAChC,GAAG;EAAEuB,UAAU;EAAEG,SAAS;EAAEI;AAAM,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}