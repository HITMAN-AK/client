{"ast":null,"code":"var Utils = require(\"../../utils\");\nvar PayoutConstants = require(\"../constants.js\");\nlet CreateCashgram = function (req) {\n  //\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"cashgramId\", \"amount\", \"name\", \"phone\", \"linkExpiry\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/createCashgram\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doPost(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doPost(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet GetCashgramStatus = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"cashgramId\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var params = \"?\";\n    params += \"cashgramId=\" + req.cashgramId;\n    var path = \"/payout/v1/getCashgramStatus\" + params;\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doGet(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doGet(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nlet DeactivateCashgram = function (req) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await PayoutConstants.checkToken();\n    } catch (error) {\n      return resolve(error);\n    }\n    var requiredParams = [\"cashgramId\"];\n    var checkParams = Utils.checkKeysInObject(req, requiredParams);\n    if (checkParams != true) {\n      return resolve(checkParams);\n    }\n    var path = \"/payout/v1/deactivateCashgram\";\n    var obj = {};\n    obj.headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + PayoutConstants.BearerToken\n    };\n    obj.path = path;\n    obj.hostname = PayoutConstants.MPAEndpoint;\n    obj.data = req;\n    try {\n      response = await Utils.doPost(obj);\n      if (response.status == \"ERROR\" && response.subCode == \"403\") {\n        await PayoutConstants.authorize();\n        obj.headers.Authorization = \"Bearer \" + PayoutConstants.BearerToken;\n        response = Utils.doPost(obj);\n      }\n      return resolve(response);\n    } catch (error) {\n      return resolve(error);\n    }\n  });\n};\nmodule.exports = {\n  CreateCashgram,\n  GetCashgramStatus,\n  DeactivateCashgram\n};","map":{"version":3,"names":["Utils","require","PayoutConstants","CreateCashgram","req","Promise","resolve","reject","checkToken","error","requiredParams","checkParams","checkKeysInObject","path","obj","headers","BearerToken","hostname","MPAEndpoint","data","response","doPost","status","subCode","authorize","Authorization","GetCashgramStatus","params","cashgramId","doGet","DeactivateCashgram","module","exports"],"sources":["C:/GitHub/gaminghub/node_modules/cashfree-sdk/Payouts/Cashgram/index.js"],"sourcesContent":["var Utils = require(\"../../utils\")\nvar PayoutConstants = require(\"../constants.js\")\n\n\nlet CreateCashgram = function(req) {//\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\t\n\t\tvar requiredParams = [\"cashgramId\", \"amount\", \"name\", \"phone\", \"linkExpiry\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar path = \"/payout/v1/createCashgram\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doPost(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doPost(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nlet GetCashgramStatus = function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\n\t\tvar requiredParams = [\"cashgramId\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar params = \"?\";\n\t\tparams += \"cashgramId=\"+req.cashgramId;\n\n\t\tvar path = \"/payout/v1/getCashgramStatus\"+params;\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doGet(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doGet(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\nlet DeactivateCashgram = function(req) {\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tawait PayoutConstants.checkToken();\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t\t\n\t\tvar requiredParams = [\"cashgramId\"];\n\t\tvar checkParams = Utils.checkKeysInObject(req, requiredParams);\n\t\tif (checkParams != true) {\n\t\t\treturn resolve (checkParams);\n\t\t}\n\n\t\tvar path = \"/payout/v1/deactivateCashgram\";\n\t\tvar obj = {};\n\t\tobj.headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\"Authorization\": \"Bearer \"+PayoutConstants.BearerToken\n\t\t};\n\t\tobj.path = path;\n\t\tobj.hostname = PayoutConstants.MPAEndpoint;\n\t\tobj.data = req;\n\n\t\ttry {\n\t\t\tresponse = await Utils.doPost(obj);\n\t\t\tif (response.status == \"ERROR\" && response.subCode == \"403\") {\n\t\t\t\tawait PayoutConstants.authorize();\n\t\t\t\tobj.headers.Authorization = \"Bearer \"+PayoutConstants.BearerToken;\n\t    \t\tresponse = Utils.doPost(obj);\n\t    \t}\n\t\t\treturn resolve(response);\n\t\t} catch (error) {\n\t\t\treturn resolve(error);\n\t\t}\n\t});\n}\n\n\nmodule.exports = {CreateCashgram, GetCashgramStatus, DeactivateCashgram};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}